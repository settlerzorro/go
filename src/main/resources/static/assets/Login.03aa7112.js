import{g as e,d as s,b as r,u as a,r as o,o as t,i as l,j as m,k as i,w as u,I as n,H as d,p,q as c,m as g}from"./vendor.ce047f19.js";import{_ as f,M as _,N as v}from"./index.3af46441.js";const b={setup(){localStorage.removeItem("ms_username"),localStorage.removeItem("ms_userid"),localStorage.removeItem("ms_userRole");const o=e(),t=s({username:"",password:""}),l=r(null);a().commit("clearTags");return{param:t,rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},login:l,submitForm:()=>{l.value.validate((e=>{if(!e)return d.error("请输入用户名或密码"),!1;_(t).then((e=>{0==e.code?v().then((e=>{if(0==e.code){let s=e.data;d.success("登录成功"),localStorage.setItem("ms_username",s.username),localStorage.setItem("ms_userid",s.id),localStorage.setItem("ms_userRole",JSON.stringify(s.authorities)),o.push("/")}else d.error(e.message)})):d.error(e.message)}))}))},toRegister:()=>{o.push("/register")}}}},h={class:"login-wrap"},w={class:"ms-login"},I=(e=>(p("data-v-19a5784c"),e=e(),c(),e))((()=>m("div",{class:"ms-title"},"大连一站式交通工具推荐系统",-1))),y={style:{"text-align":"right","margin-bottom":"8px"}},S={class:"login-btn"},x=g("登录");var V=f(b,[["render",function(e,s,r,a,d,p){const c=o("el-button"),g=o("el-input"),f=o("el-form-item"),_=o("el-form");return t(),l("div",h,[m("div",w,[I,i(_,{model:a.param,rules:a.rules,ref:"login","label-width":"0px",class:"ms-content"},{default:u((()=>[i(f,{prop:"username"},{default:u((()=>[i(g,{modelValue:a.param.username,"onUpdate:modelValue":s[0]||(s[0]=e=>a.param.username=e),placeholder:"用户名"},{prepend:u((()=>[i(c,{icon:"el-icon-user"})])),_:1},8,["modelValue"])])),_:1}),i(f,{prop:"password"},{default:u((()=>[i(g,{type:"password",placeholder:"密码",modelValue:a.param.password,"onUpdate:modelValue":s[1]||(s[1]=e=>a.param.password=e),onKeyup:s[2]||(s[2]=n((e=>a.submitForm()),["enter"]))},{prepend:u((()=>[i(c,{icon:"el-icon-lock"})])),_:1},8,["modelValue"])])),_:1}),m("div",y,[m("p",{style:{"font-size":"12px",cursor:"pointer",color:"#3882E5"},onClick:s[3]||(s[3]=(...e)=>a.toRegister&&a.toRegister(...e))},"注册")]),m("div",S,[i(c,{type:"primary",onClick:s[4]||(s[4]=e=>a.submitForm())},{default:u((()=>[x])),_:1})])])),_:1},8,["model","rules"])])])}],["__scopeId","data-v-19a5784c"]]);export{V as default};
